#!/bin/bash

# Поріг використання диску в відсотках, що налаштовується в crontab
THRESHOLD=$1

# Отримуємо поточне використання кореневого об'єму в відсотках
USAGE=$(df / | grep / | awk '{ print $5 }' | sed 's/%//g')

# Якщо використання диску перевищує поріг, записуємо попереджувальне повідомлення у файл журналу
if [ $USAGE -gt $THRESHOLD ]; then
  echo "$(date) - ВИКОРИСТАННЯ ДИСКУ ПЕРЕВИЩУЄ $THRESHOLD% (поточне використання: $USAGE%)" >> /var/log/disk.log
fi

